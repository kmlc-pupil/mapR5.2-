CLDB(Container Location Database) 服务追踪在MapR-FS 上每个容器中的以下信息。

- 容器所在节点的位置
- 容器的大小
- 容器所属的卷
- 卷的策略、配额和使用情况。


关于container的更多信息，请参看该文档的MapR章节。

CLDB还追踪在集群和活动节点上的fileservers。在多个节点上运行CLDB,通过在这些节点的分布式查找操作，达到负载均衡，并且提供高可用性。

当群集中的节点运行CLDB服务时，其中一个节点作为主CLDB,其它的节点为从节点。主CLBD可读写文件系统，而从CLBD只能读权限。Kvstore(key-value-store)容器具有容器ID 1,并保存容器相关的信息。Zookeeper追踪kvstore容器的容器信息.CLBD分配一个容器ID给每个它创建的容器，CLBD服务通过容器ID跟踪容器在集群中的位置信息。

当客户端应用程序打开了一个文件，应用从CLBD服务请求根卷名容器的容器ID,CLBD服务返回容器ID和节点Ip，集群中已经存储了这些容器的备份。客户端应用程序在根卷的名称容器中查找与文件相关联的卷，接着用目标卷的名称容器查找集群中节点的容器ID和节点IP,目标卷的名称容器具有目标文件的文件ID和inode。用户应用程序使用这些信息云打开文件，并进行读写操作。

每个fileserver服务周期性的发送心跳给CLBD服务,频率为1-3秒之间，依据集群规模而定。上报状态和容器信息，CLBD可以根据FileServer所传递的状态来发出报警。





